---
title: "GTM+GA4ã§ãƒ‡ãƒ¼ã‚¿è¨ˆæ¸¬ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹â‘¢"
emoji: "ğŸ“˜"
type: "tech"
topics:
  - "googleanalytics"
  - "eccube"
  - "googletagmanager"
published: true
published_at: "2023-02-21 13:58"
---

eã‚³ãƒãƒ¼ã‚¹ã‚¿ã‚°ã®view_itemã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½¿ã£ã¦ã€å•†å“è©³ç´°ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ãŸã¨ãã®è¨ˆæ¸¬ã‚’è¡Œã„ã¾ã™ã€‚
https://developers.google.com/tag-manager/ecommerce-ga4

## GTM

æ–°è¦ã§GA4ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚°ã‚’è¿½åŠ ã—ã¾ã™ã€‚
è¨­å®šã‚¿ã‚°ã¯ã€ŒGA4è¨­å®šã€
ã‚¤ãƒ™ãƒ³ãƒˆåã¯ã€Œview_itemã€
è©³ç´°è¨­å®šã§ã€Œeã‚³ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯ã€ŒDataLayerã€ã‚’è¨­å®š
ãƒˆãƒªã‚¬ãƒ¼ã¯ã‚ã‚‰ã‹ã˜ã‚ä½œã£ã¦ã„ãŸã€ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®view_itemã‚’é¸æŠã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/2995b702df4e-20230221.jpg)

## EC-CUBE

https://developers.google.com/tag-manager/ecommerce-ga4?hl=ja#measure_viewsimpressions_of_productitem_details
ã“ã‚“ãªæ„Ÿã˜ã®ã‚¿ã‚°ã‚’defeult/detail.tplã«æŒ¿å…¥ã—ã¾ã™ã€‚

default/detail.tpl

```smarty:default/detail.tpl
// Measure a view of product details. This example assumes the detail view occurs on pageload,
dataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.
dataLayer.push({
  event: "view_item",
  ecommerce: {
    items: [{
      item_name: "<!--{$arrProduct.name|h}-->", // Name or ID is required.
      item_id: "<!--{$tpl_product_id}-->",
      price: "<!--{$arrProduct.price02_min_inctax}-->",
      item_brand: "Google",
      item_category: "Apparel",
      item_category2: "Mens",
      item_category3: "Shirts",
      item_category4: "Tshirts",
      item_variant: "Black",
      item_list_name: "Search Results",  // If associated with a list selection.
      item_list_id: "SR123",  // If associated with a list selection.
      index: 1,  // If associated with a list selection.
      quantity: 1
    }]
  }
});
</script>

```

å•†å“IDã€å•†å“åã€ä¾¡æ ¼ã ã‘å‹•çš„ã«ã—ã¦ã€ã‚ã¨ã¯googleã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹é€šã‚Šã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚

## ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

GTMã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ã‹ã‚‰ã€æ­£å¸¸ã«view_itemã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚°ãŒç™ºç«ã—ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/3bbce2018ae7-20230221.jpg)

ã¾ãŸã€DataLayerã‚¿ãƒ–ã‹ã‚‰ã€å•†å“è©³ç´°ã®ãƒ‡ãƒ¼ã‚¿ãŒé€ã‚‰ã‚Œã¦ãã¦ã„ã‚‹ã“ã¨ã‚‚ç¢ºèªã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/1b39f42c395f-20230221.jpg)

GA4ã®ç®¡ç†ç”»é¢DebugViewã‹ã‚‰ã‚‚è¨ˆæ¸¬ã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/716035eaa755-20230221.jpg)

view_itemã«å•†å“è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚