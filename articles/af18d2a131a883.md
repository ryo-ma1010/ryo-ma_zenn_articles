---
title: "対象ディレクトリ（ファイル）を除外して圧縮したい"
emoji: "💡"
type: "tech"
topics:
  - "linux"
  - "eccube"
published: true
published_at: "2022-08-08 14:56"
---

:::message alert
この記事は自分が社内でまとめていたものを転載しております。
情報が古い恐れがあります。ご了承ください。
投稿日：2020/07/21
:::


# まえがき
ec-cubeとwordpressが同じサーバー内にある案件で
サーバー移管に伴い、ec-cubeとwordpressは別サーバーで管理することになった。
圧縮ファイルを作って新サーバーに転送するとき、ec-cubeとwordpressが合体していると容量が大きかったりあとあと削除するのも面倒だったので
最初からディレクトリを指定して圧縮すればいいのではと思ったのでやってみた

# 実行したコマンド
## ディレクトリを除外して圧縮
除外したいディレクトリのリストが書かれたファイルを用意して、tarコマンドのオプション -X を使う

```
# 除外したいディレクトリのリスト
$ cat ./exclude.list
./hoge/huga
./hoge/piyo
```

```
# リストをもとに、リスト内のデイレクトリ以外を圧縮
$ tar zcvf {圧縮ファイル名}.tar.gz -X ./exclude.list ./{圧縮対象ディレクトリ}
```
